# 循环结构

## 1.三种循环语句

C语言中共有三种循环语句，分别是while循环，for循环和do-while循环。

### 1.1 while循环

while循环属于最基础的一种循环。

#### 1.1.1 语法格式

```C++
while (条件表达式) 
      循环体 ；              
```

#### 1.1.2执行流程

补充流程图和对应叙述文字

#### 1.1.3while和if的对比

在学习的过程中，我们会发现，if和while的语法格式非常相似。那么两者有何区别呢？

我们列举一个具体的场景：我们要依次打印出0~2三个数字。

首先来看if：

```C++
#include <stdio.h>
int main() {
    int i = 0;                     // 初始化计数器
    if (i < 3) {                   // 检查一次条件
        printf("%d\\n", i);         // 条件为真，执行一次
        i++;                       // i 增加 1
    }                              // 条件不再检查，直接结束
    return 0;
}
```

运行结果：

```C++
0
```

结果为什么只打印了一次呢？是 因为 if 语句只判断了一次 i < 3，执行完一次后，程序流直接跳过了 if 块，后面没有循环回去再检查条件。

而while就不一样了：

```C++
#include <stdio.h>
int main() {
    int i = 0;                     // 初始化计数器
    while (i < 3) {                // 检查条件，满足则进入循环
        printf("%d\\n", i);         // 打印当前值
        i++;                       // i 增加 1
    }                              // 循环结束后再次检查条件
    return 0;
}
```

运行结果：

```C++
0
1
2
```

这次我们成功打印出了0、1、2三个数字，是因为while 循环的工作方式是：检查条件 → 执行循环体 → 再次检查条件。只要 i 小于 3，循环体就会重复执行。每次循环结束后，i 增加 1，直到 i 变成 3（不满足 i < 3），循环才终止。

例

```C++
while循环的
```

#### 1.4循环的三要素

循环的三要素分别为：初始化，条件判断和更新迭代。

- 初始化（Initialize）：

初始化的位置通常是在 while 循环之前，它的作用是为循环计数器（i）和其他变量（sum）赋予初始值。如果没有初始化，变量可能会是随机值，导致循环行为不可预测。

设置的初始条件只执行一次，可以有零个人，一个或多个变量设置初值。

- 条件判断（Condition）：

条件判断的位置则是在while 后面的括号内。确保每次循环开始时都会执行这个条件，半段是否继续循环。只要条件为真（true），循环体就会执行。如果条件一开始就是假，循环体可能一次都不执行。

- 更新迭代（Update）：

最后迭代的位置通常写在 while 循环体的最后一行（在 {} 里）。作用：更新循环计数器（这里是 i++），以及处理循环中产生的中间结果（这里是 sum += i）。这是防止循环无限进行（死循环）的关键。如果没有这一步，i 的值永远不会变化，条件 i <= 10 永远为真，程序会卡死。

```C++
初始化；
while （条件判断）{
       语句；
       更新迭代；
}
```

我们通过一个例子，来加深一下对循环三要素的理解：

```C++
#include <stdio.h>
int main() {
    // 1. 初始化：定义变量并赋初值
    int i = 1;          // 计数器，从 1 开始
    int sum = 0;        // 累加和，初始为 0

    // 2. while 循环（条件判断）
    while (i <= 10) {   // 条件：当 i 小于等于 10 时继续循环
        sum += i;       // 3. 迭代（更新）：累加当前的 i 到 sum
        i++;            // 3. 迭代（更新）：计数器 i 加 1，准备判断下一个数
    }

    // 循环结束后，输出结果
    printf("1 到 10 的和是: %d\\\\n", sum);
    return 0;
}
```

### 1.2 for循环

在while循环的基础上升级就来到了for循环。

#### 1.2.1语法格式

```C++
for (初始化;条件判断;更新迭代) {
    语句；                    // 循环体：每次循环执行的代码
}
```

在此处，我们稍加观察后会发现，for循环和while循环在实现循环的过程中都有初始化，条件判断和更新迭代这三部分，且两种形式无条件等价；但是，for循环的三要素更加集中，方便修改，while循环的三要素，则散落在各处，不方便集中管理，所以在选择循环语句时，for循环的使用更加频繁。

但for循环的格式并不唯一，现将：初始化，条件判断，更新迭代三部分，分别对应为表达式1，表达式2，表达式3。我们分别可以省略表达式1，表达式2，表达式3，但是表达式之间的`；`不能省略，但是这样的循环是不完整的，我们需要参考while循环的格式在对应的地方补充缺失的语句：

- 

```C++
for(;表达式2；表达式3)
   语句；
表达式1；
for(;表达式2；表达式3)
   语句；
```

- 

```C++
for(表达式1；；表达式3)
   语句；
```

这种情况下，条件默认为真，就会陷入到无限循环中，需要谨慎使用。

```C++
for(表达式1；；表达式3){
   if（表达式2）
   break；
   语句；
}
```

- 

```C++
for(表达式1；表达式2；)
   语句；
for(表达式1；表达式2；) {
   语句；
   表达式3；
}   
```

- 

```C++
for(；表达式2；)
   语句；
表达式1；
for(；表达式2；) {
   语句；
   表达式3；
}   
```

- 

```C++
for(；；)
   语句；
```

此时会无休止的循环`语句，`显然并没有有实用价值。

#### 1.2.2 执行流程

补充流程图和对应叙述文字

例

```C++

```

### 1.3 do-while循环

相较于前两种循环，do-while循环在实际开发中的使用频率较低，do-while循环同while循环和for循环的最大区别在于先执行后判断。即使循环条件一开始就不满足，循环体也会执行一次。

#### 1.3.1语法格式

```C++
do {
    // 循环体代码：这里的代码会**至少执行一次**
    } 
while (条件表达式);  // 注意：这里的条件表达式后面必须加分号
```

#### 1.3.2 执行流程

补充流程图和对应叙述文字

例

```C++

```

### 1.4 死循环

在上述的讲解中，我们会发现循环中会出现无限循环的问题，我们也称其为死循环。

### 1.5 三种循环对比总结

|          | while循环 | for循环 | do-while循环 |
| -------- | --------- | ------- | ------------ |
| 特点     |           |         |              |
| 适用场景 |           |         |              |
| 语法格式 |           |         |              |
| 执行流程 |           |         |              |

## 2.break和continue语句

在循环执行过程中，会遇到一些特殊情况，需要提前终止循环，C语言中提供了break和continue两种语句来实现提前结束循环。

### 2.1break语句

```C++
break；   //分号结束，不加括号
```

当程序执行到 break 语句时，循环立即终止，不再执行循环体中 break 后面的代码，也不再检查循环条件。在 while(true) 或 for(;;) 这种无限循环中，break 是唯一的退出方式。

例

```C++

```

### 2.2continue语句

```C++
continue；    //分号结束，不加括号
```

当执行到 continue 时，循环体中 continue 之后的代码将被忽略，不会执行。

例

```C++

```

我们来对比一下break和continue

| 特征     | break                  | continue                           |
| -------- | ---------------------- | ---------------------------------- |
| 作用     | 整个循环               | 跳过本次循环，进入下一次更新迭代   |
| 后续代码 | 不再执行循环体后续代码 | 循环体中continue之后的代码不会执行 |
| 影响范围 | 整个循环结果           | 当前这一次的循环体                 |

### 2.3三大循环中的break和continue

#### 2.3.1while中的break和continue

- break举例

```C++

```

- continue举例

```C++

```

#### 2.3.2for中的break和continue

- break举例

```C++

```

- continue举例

```C++

```

#### 2.3.3do-while中的break和continue

- break举例

```C++

```

- continue举例

```C++

```

## 3.循环的嵌套

前面学习了三种循环，许多问题单靠一层循环是无法解决的，我们就要将三种循环相互嵌套使用。

例如：

```C++
while（）{
      ···；
      while（）{
      ···；
      }
}

for（）{
      ···；
      while（）{
      ···；
      }
}

for（）{
      ···；
      for（）{
      ···；
      }
}
```

可以再补充一下其他形式

例

```C++

```

## 4.goto语句

当我们面对多层循环时，仅仅依靠break往往只能结束最内层的循环，想要跳出外层循环就显得力不从心。为了弥补这一点，C语言提供了goto语句作为一种更为直接的控制方式。

### 4.1语法格式

```C++
标识符:               // 跳转点定义    
语句;
goto 标识符;        // 跳转语句，执行后会跳转回到上面标识符的位置
```

goto 的使用通常包含两部分：

- 定义跳转点：使用一个标识符加冒号（:）来定义跳转点。
- 执行跳转：使用 goto 加上标识符名称来执行跳转。

### 4.2 执行流程

补充流程图和对应叙述文字

goto语句主要使用在多层循环的跳出：

```C++
#include <stdio.h>

int main() {
    int i, j, k;
    EndAllLoops:
    printf("已成功跳出所有循环！\\n");
    printf("当前 i = %d, j = %d, k = %d\\n", i, j, k);
    return 0; // 结束程序
    // ----------------- 三层循环 -----------------
    for (i = 0; i < 10; ++i) {
        for (j = 0; j < 10; ++j) {
            for (k = 0; k < 10; ++k) {
                // 当 i + j + k 的和大于 15 时，跳出所有循环
                if (i + j + k > 15) {
                    goto EndAllLoops; // 立即跳转到上方的 EndAllLoops 标识符处
                }
                // 这里是正常的循环体代码（如果不满足条件就会执行）
            }
        }
    }

    // 如果循环正常结束（没有跳转），这里的代码才会执行
    printf("循环正常结束，没有触发跳转。\\n");
}
```

goto语句适用于需要一次性退出多层嵌套循环，是全局的（但受限于函数作用域）。break语句使用于简单的循环终止，只能跳出当前所在的单层循环，不会影响到外层的循环，是单层的。

但滥用 goto 会导致程序流程混乱，被称为“意大利面条代码”。因此，除非确实需要（如深层循环的错误退出），一般建议使用 break、continue 或函数返回来替代 goto。

## 5.综合运用